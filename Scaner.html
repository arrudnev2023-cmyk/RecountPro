<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–°–∫–∞–Ω–µ—Ä —à—Ç—Ä–∏—Ö–∫–æ–¥–æ–≤</title>
  <script src="https://unpkg.com/@zxing/browser@latest"></script>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
      max-width: 600px;
      margin: auto;
    }
    video {
      width: 100%;
      border: 1px solid #ccc;
      margin-bottom: 10px;
    }
    #result {
      font-size: 18px;
      margin-top: 10px;
      padding: 10px;
      background: #f0f0f0;
      border-radius: 6px;
    }
  </style>
</head>
<body>

<h2>üì∑ –°–∫–∞–Ω–µ—Ä —à—Ç—Ä–∏—Ö–∫–æ–¥–æ–≤</h2>
<video id="video" autoplay muted playsinline></video>
<div id="result">–û–∂–∏–¥–∞–Ω–∏–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è‚Ä¶</div>

<script>
  const resultEl = document.getElementById("result");
  const videoEl = document.getElementById("video");
  let base = {};

  // –ó–∞–≥—Ä—É–∂–∞–µ–º –±–∞–∑—É
  fetch("base.json")
    .then(res => res.json())
    .then(data => {
      base = data;
      startScanner();
    });

  function startScanner() {
    const codeReader = new ZXing.BrowserMultiFormatReader();
    codeReader.decodeFromVideoDevice(null, videoEl, (result, err) => {
      if (result) {
        const code = result.getText();
        const name = base[code];
        resultEl.textContent = name
          ? `‚úÖ ${name}`
          : `‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω: ${code}`;
      }
    });
  }
</script>

</body>
</html>
