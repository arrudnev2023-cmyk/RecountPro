<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Cosmic Background</title>
  <style>
    html, body {
      margin: 0;
      height: 100%;
      background: #000;
      overflow: hidden;
    }
    canvas {
      display: block;
    }
  </style>
</head>
<body>
<canvas id="space"></canvas>

<script>
const canvas = document.getElementById('space');
const ctx = canvas.getContext('2d');
let W, H;
function resize() {
  W = canvas.width = window.innerWidth;
  H = canvas.height = window.innerHeight;
}
resize();
window.addEventListener('resize', resize);

// === Звёзды ===
const stars = Array.from({length: 300}, () => ({
  x: Math.random() * W,
  y: Math.random() * H,
  r: Math.random() * 1.5 + 0.5,
  alpha: Math.random()
}));

// === Планеты ===
const planets = [
  { x: W*0.25, y: H*0.6, r: 80, color: '#4455ff' },
  { x: W*0.75, y: H*0.3, r: 120, color: '#ff4499' }
];

// === Кометы ===
const comets = [];
function spawnComet() {
  if (Math.random() < 0.002) {
    comets.push({
      x: Math.random() * W,
      y: -50,
      dx: -2 - Math.random()*2,
      dy: 3 + Math.random()*2,
      len: 150
    });
  }
}

// === Рендер ===
function drawStars() {
  stars.forEach(s => {
    ctx.beginPath();
    ctx.arc(s.x, s.y, s.r, 0, Math.PI*2);
    ctx.fillStyle = `rgba(255,255,255,${s.alpha})`;
    ctx.fill();
    s.alpha += (Math.random()-0.5)*0.02;
    if (s.alpha < 0.1) s.alpha = 0.1;
    if (s.alpha > 1) s.alpha = 1;
  });
}

function drawPlanets() {
  planets.forEach(p => {
    const grad = ctx.createRadialGradient(p.x, p.y, p.r*0.2, p.x, p.y, p.r);
    grad.addColorStop(0, p.color);
    grad.addColorStop(1, '#000');
    ctx.beginPath();
    ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
    ctx.fillStyle = grad;
    ctx.shadowBlur = 40;
    ctx.shadowColor = p.color;
    ctx.fill();
    ctx.shadowBlur = 0;
  });
}

function drawComets() {
  for (let i=comets.length-1; i>=0; i--) {
    const c = comets[i];
    const grad = ctx.createLinearGradient(c.x, c.y, c.x-c.dx*c.len, c.y-c.dy*c.len);
    grad.addColorStop(0, 'rgba(255,255,255,0.9)');
    grad.addColorStop(1, 'rgba(255,255,255,0)');
    ctx.beginPath();
    ctx.moveTo(c.x, c.y);
    ctx.lineTo(c.x-c.dx*c.len, c.y-c.dy*c.len);
    ctx.strokeStyle = grad;
    ctx.lineWidth = 2;
    ctx.stroke();
    c.x += c.dx;
    c.y += c.dy;
    if (c.y > H+100 || c.x < -100) comets.splice(i,1);
  }
}

function animate() {
  ctx.clearRect(0,0,W,H);
  drawStars();
  drawPlanets();
  drawComets();
  spawnComet();
  requestAnimationFrame(animate);
}
animate();
</script>
</body>
</html>
