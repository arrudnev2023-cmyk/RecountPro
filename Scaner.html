<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>CSV → JSON (barcode → name)</title>
<style>
    body { font-family: sans-serif; padding: 40px; max-width: 700px; margin: auto; }
    textarea { width: 100%; height: 300px; margin-top: 20px; }
    .btn { padding: 10px 20px; background: #007aff; color: white; border: none; cursor: pointer; border-radius: 6px; }
    .btn:hover { background: #005fcc; }
</style>
</head>
<body>

<h2>CSV → JSON конвертер (barcode → name)</h2>
<p>Загрузи CSV с двумя столбцами: <b>Название, Штрихкод</b></p>

<input type="file" id="fileInput" accept=".csv">
<button class="btn" onclick="convert()">Конвертировать</button>

<h3>Результат JSON:</h3>
<textarea id="output"></textarea>

<script>
function convert() {
    const file = document.getElementById('fileInput').files[0];
    if (!file) {
        alert("Выбери CSV файл");
        return;
    }

    const reader = new FileReader();
    reader.onload = function(e) {
        const text = e.target.result.trim();
        const lines = text.split(/\r?\n/);

        const result = {};

        for (let line of lines) {
            const parts = line.split(",");
            if (parts.length < 2) continue;

            const name = parts[0].trim();
            const barcode = parts[1].trim();

            if (name && barcode) {
                result[barcode] = name;
            }
        }

        document.getElementById('output').value = JSON.stringify(result, null, 2);
    };

    reader.readAsText(file, "UTF-8");
}
</script>

</body>
</html>
