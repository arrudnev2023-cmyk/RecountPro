<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>RecountPro ‚Äî –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏ (–±–µ–∑ –±—ç–∫–µ–Ω–¥–∞)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root {
      --bg: #0f1115;
      --card: #121621;
      --accent: #3a7afe;
      --text: #eaeef3;
      --border: #2a3550;
      --bot: #141b26;
      --user: #1b2434;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      margin: 0;
      background: var(--bg);
      color: var(--text);
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    header {
      background: #11141a;
      padding: 14px 20px;
      border-bottom: 1px solid var(--border);
      text-align: center;
      position: sticky;
      top: 0;
      z-index: 10;
    }
    header h1 {
      font-size: 18px;
      margin: 0;
      color: var(--accent);
      letter-spacing: 0.2px;
    }
    .container {
      flex: 1;
      display: grid;
      gap: 12px;
      padding: 12px;
      max-width: 680px;
      margin: 0 auto;
      width: 100%;
    }
    .card {
      border: 1px solid var(--border);
      border-radius: 14px;
      background: var(--card);
      box-shadow: 0 6px 18px rgba(0,0,0,0.35);
    }
    .chat {
      display: flex;
      flex-direction: column;
      gap: 10px;
      height: 56vh;
      min-height: 380px;
      padding: 12px;
      overflow-y: auto;
    }
    .msg {
      padding: 10px 14px;
      border-radius: 12px;
      max-width: 80%;
      font-size: 15px;
      line-height: 1.45;
      word-wrap: break-word;
      white-space: pre-wrap;
    }
    .msg.user { align-self: flex-end; background: var(--user); }
    .msg.bot  { align-self: flex-start; background: var(--bot); }
    .composer {
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 8px;
      padding: 12px;
      border-top: 1px solid var(--border);
    }
    .composer input[type="text"] {
      padding: 12px;
      border-radius: 10px;
      border: 1px solid var(--border);
      background: #0f1624;
      color: var(--text);
      font-size: 15px;
    }
    .composer button {
      padding: 12px 16px;
      border-radius: 10px;
      border: none;
      background: var(--accent);
      color: white;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s;
    }
    .composer button:hover { background: #2f63d6; }
    .panel {
      display: grid;
      gap: 10px;
      padding: 12px;
    }
    .hint { font-size: 13px; opacity: 0.85; }
    .quick {
      display: inline-flex; align-items: center; gap: 8px;
      padding: 10px 12px; border-radius: 999px;
      border: 1px solid var(--border); background: #162036;
      color: var(--text); font-size: 13px; cursor: pointer;
    }
    .quick:hover { background: #1a2948; }
    .upload {
      display: grid; grid-template-columns: 1fr auto; gap: 8px;
    }
    input[type="file"] {
      padding: 10px; border-radius: 10px; border: 1px solid var(--border);
      background: #0f1624; color: var(--text); font-size: 13px;
    }
    .primary {
      padding: 10px 12px; border-radius: 10px; border: none;
      background: var(--accent); color: #fff; font-weight: 600; cursor: pointer;
    }
    @media (max-width: 460px) {
      .chat { height: 60vh; }
      .composer input[type="text"] { font-size: 14px; padding: 11px; }
      .composer button { font-size: 14px; padding: 11px 12px; }
      header h1 { font-size: 16px; }
    }
  </style>
</head>
<body>
  <header>
    <h1>ü§ñ RecountPro ‚Äî –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏</h1>
  </header>

  <div class="container">
    <!-- –ß–∞—Ç -->
    <div class="card">
      <div id="chat" class="chat"></div>
      <div class="composer">
        <input id="msg" type="text" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ: –•–æ—á—É –¥–æ—Å—Ç—É–ø, –°—Ç–∞—Ç—É—Å, –û–ø–ª–∞—Ç–∏–ª..." />
        <button id="send">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
      </div>
    </div>

    <!-- –ü–∞–Ω–µ–ª—å –¥–µ–π—Å—Ç–≤–∏–π -->
    <div class="card panel">
      <div class="hint">–¶–µ–Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∏: 799 —Ä—É–±./–º–µ—Å. –†–µ–∫–≤–∏–∑–∏—Ç—ã –¥–ª—è –æ–ø–ª–∞—Ç—ã: 2202 2022 1234 5678</div>
      <div style="display:flex; gap:8px; flex-wrap: wrap;">
        <button class="quick" data-text="–•–æ—á—É –¥–æ—Å—Ç—É–ø">–•–æ—á—É –¥–æ—Å—Ç—É–ø</button>
        <button class="quick" data-text="–°—Ç–∞—Ç—É—Å">–°—Ç–∞—Ç—É—Å</button>
        <button class="quick" data-text="–û–ø–ª–∞—Ç–∏–ª, –æ—Ç–ø—Ä–∞–≤–ª—è—é —á–µ–∫">–û–ø–ª–∞—Ç–∏–ª</button>
      </div>
      <div class="hint">–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–∫—Ä–∏–Ω –æ–ø–ª–∞—Ç—ã (—ç–º—É–ª—è—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑ —Å–µ—Ä–≤–µ—Ä–∞):</div>
      <div class="upload">
        <input id="file" type="file" accept="image/*" />
        <button id="uploadBtn" class="primary">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —á–µ–∫</button>
      </div>
    </div>
  </div>

  <script>
    // –ü—Ä–æ—Å—Ç–µ–π—à–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±–µ–∑ –±—ç–∫–µ–Ω–¥–∞ ‚Äî –≤ localStorage
    const stateKey = 'recountpro_sub';
    let state = loadState();

    const chat = document.getElementById('chat');
    const msg  = document.getElementById('msg');
    const sendBtn = document.getElementById('send');
    const fileInput = document.getElementById('file');
    const uploadBtn = document.getElementById('uploadBtn');

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è
    pushBot('–ü—Ä–∏–≤–µ—Ç! –Ø –∞–≥–µ–Ω—Ç RecountPro.\n‚Äî –ù–∞–ø–∏—à–∏—Ç–µ ‚Äú–•–æ—á—É –¥–æ—Å—Ç—É–ø‚Äù\n‚Äî –ó–∞–≥—Ä—É–∑–∏—Ç–µ —á–µ–∫ –æ–ø–ª–∞—Ç—ã\n‚Äî –ü–æ–ª—É—á–∏—Ç–µ –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å –Ω–∞ –º–µ—Å—è—Ü.');

    // –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã
    document.querySelectorAll('.quick').forEach(b => {
      b.addEventListener('click', () => {
        msg.value = b.dataset.text;
        handleSend();
      });
    });

    sendBtn.addEventListener('click', handleSend);
    msg.addEventListener('keydown', e => { if (e.key === 'Enter') handleSend(); });
    uploadBtn.addEventListener('click', handleUpload);

    function handleSend() {
      const text = (msg.value || '').trim();
      if (!text) return;
      pushUser(text);
      msg.value = '';
      respond(text);
    }

    function handleUpload() {
      const file = fileInput.files && fileInput.files[0];
      if (!file) {
        pushBot('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —á–µ–∫–∞ –∏ –Ω–∞–∂–º–∏—Ç–µ ‚Äú–û—Ç–ø—Ä–∞–≤–∏—Ç—å —á–µ–∫‚Äù.');
        return;
      }
      // –≠–º—É–ª—è—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏: –ø—Ä–∏–Ω–∏–º–∞–µ–º –ª—é–±–æ–π —Ñ–∞–π–ª –∫–∞–∫ –≤–∞–ª–∏–¥–Ω—ã–π —á–µ–∫
      issueCredentials();
    }

    // –õ–æ–≥–∏–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ –±–µ–∑ –±—ç–∫–µ–Ω–¥–∞
    function respond(input) {
      const text = input.toLowerCase();

      if (text.includes('—Ö–æ—á—É –¥–æ—Å—Ç—É–ø')) {
        pushBot([
          'üí≥ –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ RecountPro —Å—Ç–æ–∏—Ç 799 —Ä—É–±./–º–µ—Å.',
          '–ü–µ—Ä–µ–≤–µ–¥–∏—Ç–µ –ø–æ —Ä–µ–∫–≤–∏–∑–∏—Ç–∞–º: 2202 2022 1234 5678',
          '–ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –∑–∞–≥—Ä—É–∑–∏—Ç–µ —á–µ–∫ ‚Äî —è –≤—ã–¥–∞–º –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å.'
        ].join('\n'));
        return;
      }

      if (text.includes('–æ–ø–ª–∞—Ç–∏–ª') || text.includes('—á–µ–∫')) {
        pushBot('üì∑ –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —á–µ–∫–∞ —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É –Ω–∏–∂–µ ‚Äî –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—ã–¥–∞–º –¥–æ—Å—Ç—É–ø.');
        return;
      }

      if (text.includes('—Å—Ç–∞—Ç—É—Å')) {
        const s = loadState();
        if (s && s.login && s.expires) {
          pushBot(`üîê –í–∞—à –¥–æ—Å—Ç—É–ø –∞–∫—Ç–∏–≤–µ–Ω\n–õ–æ–≥–∏–Ω: ${s.login}\n–ü–∞—Ä–æ–ª—å: ${s.password}\n‚è≥ –î–µ–π—Å—Ç–≤—É–µ—Ç –¥–æ: ${formatDateRU(new Date(s.expires))}`);
        } else {
          pushBot('‚ùå –£ –≤–∞—Å –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–∏. –ù–∞–ø–∏—à–∏—Ç–µ ‚Äú–•–æ—á—É –¥–æ—Å—Ç—É–ø‚Äù –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —á–µ–∫ –æ–ø–ª–∞—Ç—ã.');
        }
        return;
      }

      pushBot('ü§ñ –Ø –≤–∞—Å –ø–æ–Ω—è–ª. –î–æ—Å—Ç—É–ø: ‚Äú–•–æ—á—É –¥–æ—Å—Ç—É–ø‚Äù, –∑–∞—Ç–µ–º –∑–∞–≥—Ä—É–∑–∏—Ç–µ —á–µ–∫. –ü—Ä–æ–≤–µ—Ä–∫–∞ ‚Äî ‚Äú–°—Ç–∞—Ç—É—Å‚Äù.');
    }

    // –í—ã–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç—É–ø–∞
    function issueCredentials() {
      const s = loadState();
      // –ï—Å–ª–∏ —É–∂–µ –∞–∫—Ç–∏–≤–Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∞ –∏ –Ω–µ –∏—Å—Ç–µ–∫–ª–∞ ‚Äî –Ω–µ –≤—ã–¥–∞—ë–º –∑–∞–Ω–æ–≤–æ
      if (s && s.login && s.expires && new Date(s.expires) > new Date()) {
        pushBot(`üîê –î–æ—Å—Ç—É–ø —É–∂–µ –≤—ã–¥–∞–Ω —Ä–∞–Ω–µ–µ.\n–õ–æ–≥–∏–Ω: ${s.login}\n–ü–∞—Ä–æ–ª—å: ${s.password}\n‚è≥ –î–µ–π—Å—Ç–≤—É–µ—Ç –¥–æ: ${formatDateRU(new Date(s.expires))}`);
        return;
      }
      const creds = generateCredentials();
      saveState({ ...s, ...creds });
      pushBot(`‚úÖ –û–ø–ª–∞—Ç–∞ –ø—Ä–∏–Ω—è—Ç–∞!\nüîê –õ–æ–≥–∏–Ω: ${creds.login}\nüîë –ü–∞—Ä–æ–ª—å: ${creds.password}\n‚è≥ –î–µ–π—Å—Ç–≤—É–µ—Ç –¥–æ: ${formatDateRU(new Date(creds.expires))}\n\n‚ÑπÔ∏è –ï—Å–ª–∏ –ø–æ—Ç–µ—Ä—è–µ—Ç–µ –¥–∞–Ω–Ω—ã–µ ‚Äî –Ω–∞–ø–∏—à–∏—Ç–µ ‚Äú–°—Ç–∞—Ç—É—Å‚Äù.`);
    }

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ª–æ–≥–∏–Ω–∞/–ø–∞—Ä–æ–ª—è –∏ —Å—Ä–æ–∫–∞
    function generateCredentials() {
      const login = 'user' + Math.floor(1000 + Math.random() * 9000);
      const password = Math.random().toString(36).slice(-10);
      const expires = new Date(Date.now() + 30 * 24 * 60 * 60 * 1000); // 30 –¥–Ω–µ–π
      return { login, password, expires: expires.toISOString() };
    }

    // –°–æ—Å—Ç–æ—è–Ω–∏–µ
    function loadState() {
      try {
        const s = localStorage.getItem(stateKey);
        return s ? JSON.parse(s) : {};
      } catch { return {}; }
    }
    function saveState(s) {
      state = s;
      localStorage.setItem(stateKey, JSON.stringify(s));
    }

    // UI helpers
    function push(text, who='bot') {
      const div = document.createElement('div');
      div.className = 'msg ' + who;
      div.textContent = (who === 'user' ? 'üßë ' : 'ü§ñ ') + text;
      chat.appendChild(div);
      chat.scrollTop = chat.scrollHeight;
    }
    function pushBot(text) { push(text, 'bot'); }
    function pushUser(text) { push(text, 'user'); }
    function formatDateRU(date) {
      return date.toLocaleDateString('ru-RU', { year: 'numeric', month: 'long', day: 'numeric' });
    }
  </script>
</body>
</html>
