<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Recount Tycoon</title>
  <style>
    body { font-family: Inter, sans-serif; margin: 0; padding: 0; background: #fff; color: #333; }
    header { background: #f5f5f5; padding: 20px; text-align: center; border-bottom: 1px solid #ddd; }
    .stats { font-size: 18px; margin-top: 10px; }
    section { padding: 20px; }
    h2 { margin-bottom: 10px; font-size: 20px; }
    .card { background: #f0f0f0; padding: 15px; margin: 10px 0; border-radius: 8px; cursor: pointer; transition: background 0.2s; font-size: 16px; }
    .card:hover { background: #e0e0e0; }
    button { margin: 5px; padding: 10px 20px; font-size: 16px; background: #333; color: #fff; border: none; border-radius: 6px; cursor: pointer; }
    button:hover { background: #555; }
    .log { background: #fafafa; border-top: 1px solid #ddd; padding: 20px; font-size: 14px; }
    #log div { margin-bottom: 5px; }
    @media (max-width: 600px) {
      .card { font-size: 15px; padding: 12px; }
      .stats { font-size: 16px; }
      button { font-size: 15px; padding: 8px 16px; }
    }
  </style>
</head>
<body>
  <header>
    <h1>Recount Tycoon</h1>
    <div class="stats">
      ğŸ’° <span id="budget">10000</span> â± <span id="time">0</span> ğŸ‘¥ <span id="team">1</span> ğŸ“ˆ <span id="reputation">50</span> ğŸ¢ <span id="level">1</span>
    </div>
    <button onclick="saveGame()">ğŸ’¾ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ</button>
    <button onclick="loadGame()">ğŸ“‚ Ğ—Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ</button>
  </header>

  <section class="features">
    <h2>Ğ¤Ğ¸Ñ‡Ğ¸ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ°</h2>
    <div class="card" onclick="addFeature('pdf')">ğŸ“„ PDF-Ğ¿Ğ°Ñ€ÑĞ¸Ğ½Ğ³ â€” 3000</div>
    <div class="card" onclick="addFeature('rls')">ğŸ” RLS â€” 4000</div>
    <div class="card" onclick="addFeature('mobile')">ğŸ“± ĞœĞ¾Ğ±Ğ¸Ğ»ÑŒĞ½Ğ°Ñ Ğ°Ğ´Ğ°Ğ¿Ñ‚Ğ°Ñ†Ğ¸Ñ â€” 2500</div>
    <div class="card" onclick="addFeature('api')">ğŸ”— Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ â€” 3500</div>
    <div class="card" onclick="addFeature('analytics')">ğŸ“Š ĞĞ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ° â€” 2000</div>
  </section>

  <section class="upgrades">
    <h2>Ğ£Ğ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ñ Ñ„Ğ¸Ñ‡</h2>
    <div class="card" onclick="upgradeFeature('pdf')">ğŸ“„ PDF â†’ AI â€” 4000</div>
    <div class="card" onclick="upgradeFeature('rls')">ğŸ” RLS â†’ ĞÑƒĞ´Ğ¸Ñ‚ â€” 5000</div>
    <div class="card" onclick="upgradeFeature('mobile')">ğŸ“± ĞœĞ¾Ğ± â†’ ĞšÑ€Ğ¾ÑÑĞ¿Ğ»Ğ°Ñ‚Ñ„. â€” 3500</div>
    <div class="card" onclick="upgradeFeature('api')">ğŸ”— API â†’ Webhooks â€” 4500</div>
    <div class="card" onclick="upgradeFeature('analytics')">ğŸ“Š ĞĞ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ° â†’ Ğ”Ğ°ÑˆĞ±Ğ¾Ñ€Ğ´Ñ‹ â€” 3000</div>
  </section>

  <section class="team">
    <h2>ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ°</h2>
    <div class="card" onclick="hire('designer')">ğŸ¨ UX-Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½ĞµÑ€ â€” 2000</div>
    <div class="card" onclick="hire('dev')">ğŸ’» Ğ Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸Ğº â€” 3000</div>
    <div class="card" onclick="hire('lawyer')">âš–ï¸ Ğ®Ñ€Ğ¸ÑÑ‚ â€” 2500</div>
    <div class="card" onclick="hire('analyst')">ğŸ“ˆ ĞĞ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸Ğº â€” 1500</div>
  </section>

  <section class="office">
    <h2>ĞÑ„Ğ¸Ñ</h2>
    <div class="card" onclick="buildFloor('design')">ğŸ¨ Ğ­Ñ‚Ğ°Ğ¶ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½Ğ° â€” 3000</div>
    <div class="card" onclick="buildFloor('dev')">ğŸ’» Ğ­Ñ‚Ğ°Ğ¶ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ â€” 3000</div>
    <div class="card" onclick="buildFloor('legal')">âš–ï¸ Ğ­Ñ‚Ğ°Ğ¶ ÑÑ€Ğ¸ÑÑ‚Ğ¾Ğ² â€” 3000</div>
    <div class="card" onclick="buildFloor('analytics')">ğŸ“Š Ğ­Ñ‚Ğ°Ğ¶ Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ¸ â€” 3000</div>
  </section>

  <section class="clients">
    <h2>Ğ—Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ¾Ğ²</h2>
    <div id="client-request" class="card">â€”</div>
    <button onclick="respondToClient(true)">ĞŸÑ€Ğ¸Ğ½ÑÑ‚ÑŒ</button>
    <button onclick="respondToClient(false)">ĞÑ‚ĞºĞ»Ğ¾Ğ½Ğ¸Ñ‚ÑŒ</button>
    <button onclick="nextTurn()">Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ Ñ…Ğ¾Ğ´</button>
  </section>

  <section class="businesses">
    <h2>Ğ‘Ğ¸Ğ·Ğ½ĞµÑÑ‹</h2>
    <div id="business-list"></div>
  </section>

  <section class="log">
    <h2>Ğ¡Ğ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ</h2>
    <div id="log"></div>
  </section>

  <script>
    let budget = 10000, time = 0, team = 1, reputation = 50, level = 1;
    let features = [], featureLevels = { pdf: 1, rls: 1, mobile: 1, api: 1, analytics: 1 };
    let office = { design: false, dev: false, legal: false, analytics: false };
    let currentClient = null;

    function updateStats() {
      budget = Math.max(0, budget);
      reputation = Math.max(0, reputation);
      document.getElementById("budget").textContent = budget;
      document.getElementById("time").textContent = time;
      document.getElementById("team").textContent = team;
      document.getElementById("reputation").textContent = reputation;
      document.getElementById("level").textContent = level;
    }

    function log(message) {
      const entry = document.createElement("div");
      entry.textContent = `â± ${time}: ${message}`;
      document.getElementById("log").prepend(entry);
    }

    function addFeature(name) {
      const costs = { pdf: 3000, rls: 4000, mobile: 2500, api: 3500, analytics: 2000 };
      if (budget >= costs[name] && !features.includes(name)) {
        budget -= costs[name];
        features.push(name);
        time++;
        log(`âœ… Ğ’Ğ½ĞµĞ´Ñ€ĞµĞ½Ğ° Ñ„Ğ¸Ñ‡Ğ°: ${name.toUpperCase()}`);
        updateStats(); checkLevelUp();
      } else {
        log("ĞĞµĞ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ Ğ±ÑĞ´Ğ¶ĞµÑ‚Ğ° Ğ¸Ğ»Ğ¸ Ñ„Ğ¸Ñ‡Ğ° ÑƒĞ¶Ğµ Ğ²Ğ½ĞµĞ´Ñ€ĞµĞ½Ğ°.");
      }
    }

    function upgradeFeature(name) {
      const cost = 2000 + featureLevels[name] * 1000;
      if (budget >= cost && featureLevels[name] < 2) {
        budget -= cost;
        featureLevels[name]++;
        time++;
        log(`ğŸ”§ Ğ¤Ğ¸Ñ‡Ğ° ${name.toUpperCase()} ÑƒĞ»ÑƒÑ‡ÑˆĞµĞ½Ğ° Ğ´Ğ¾ ÑƒÑ€Ğ¾Ğ²Ğ½Ñ ${featureLevels[name]}`);
        updateStats();
      } else {
        log("ĞĞµĞ»ÑŒĞ·Ñ ÑƒĞ»ÑƒÑ‡ÑˆĞ¸Ñ‚ÑŒ: Ğ»Ğ¸Ğ±Ğ¾ Ğ½ĞµÑ‚ Ğ±ÑĞ´Ğ¶ĞµÑ‚Ğ°, Ğ»Ğ¸Ğ±Ğ¾ ÑƒĞ¶Ğµ Ğ¼Ğ°ĞºÑĞ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ.");
      }
    }

    function hire(role) {
      const costs = { designer: 2000, dev: 3000, lawyer: 2500, analyst: 1500 };
      if (budget >= costs[role]) {
        budget -= costs[role];
        team++;
        time++;
        log(`ğŸ‘¥ ĞĞ°Ğ½ÑÑ‚: ${role}`);
        updateStats();
      } else {
        log("ĞĞµĞ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ Ğ±ÑĞ´Ğ¶ĞµÑ‚Ğ° Ğ´Ğ»Ñ Ğ½Ğ°Ğ¹Ğ¼Ğ°.");
      }
    }

    function buildFloor(floor) {
      const cost = 3000;
      if (budget >= cost && !office[floor]) {
        budget -= cost;
        office[floor] = true;
        time++;
        log(`ğŸ¢ ĞŸĞ¾ÑÑ‚Ñ€Ğ¾ĞµĞ½ ÑÑ‚Ğ°Ğ¶: ${floor}`);
        updateStats();
      } else {
        log("Ğ­Ñ‚Ğ°Ğ¶ ÑƒĞ¶Ğµ Ğ¿Ğ¾ÑÑ‚Ñ€Ğ¾ĞµĞ½ Ğ¸Ğ»Ğ¸ Ğ½ĞµĞ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ Ğ±ÑĞ´Ğ¶ĞµÑ‚Ğ°.");
      }
    }

    const clientRequests = [
      { text: "ĞÑƒĞ¶Ğ½Ğ° Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ 1Ğ¡", need: "api+", reward: 1200 },
      { text: "Ğ¥Ğ¾Ñ‡Ñƒ Ğ°Ğ²Ñ‚Ğ¾-Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ Ğ¸Ğ· PDF", need: "pdf+", reward: 1500 },
      { text: "ĞÑƒĞ¶Ğ½Ğ° RLS Ñ Ñ€Ğ°Ğ·Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸ĞµĞ¼ Ğ¿Ğ¾ Ñ€Ğ¾Ğ»ÑĞ¼", need: "rls+", reward: 1800 },
      { text: "ĞŸÑ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ¾ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ Ğ½Ğ° Android Ğ¸ iOS", need: "mobile+", reward: 1600 },
      { text: "Ğ¥Ğ¾Ñ‡Ñƒ Ğ´Ğ°ÑˆĞ±Ğ¾Ñ€Ğ´Ñ‹ Ğ¸ Ğ¿Ñ€Ğ¾Ğ³Ğ½Ğ¾Ğ·Ñ‹", need: "analytics+", reward: 1400 }
    ];

    function triggerClientRequest() {
      currentClient = clientRequests[Math.floor(Math.random() * clientRequests.length)];
      document.getElementById("client-request").textContent = `ğŸ’¬ ${currentClient.text}`;
    }

    function respondToClient(accept) {
      if (!currentClient) return;
      if (accept) {
        const key = currentClient.need.replace("+", "");
        if (featureLevels[key] >= 2) {
          budget += currentClient.reward;
          reputation += 5;
          log(`ğŸ“¦ Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½: +${currentClient.reward} Ğ¸ +5 Ñ€ĞµĞ¿ÑƒÑ‚Ğ°Ñ†Ğ¸Ğ¸`);
        } else {
          log("âŒ Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ¿Ñ€Ğ¾Ğ²Ğ°Ğ»ĞµĞ½: Ñ„Ğ¸Ñ‡Ğ° Ğ½Ğµ ÑƒĞ»ÑƒÑ‡ÑˆĞµĞ½Ğ°");
          reputation -= 5;
        }
      } else {
        log("ğŸš« Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ¾Ñ‚ĞºĞ»Ğ¾Ğ½Ñ‘Ğ½");
        reputation -= 2;
      }
      currentClient = null;
      document.getElementById("client-request").textContent = "â€”";
      updateStats();
    }

    function paySalaries() {
      const salary = team * 500;
      budget -= salary;
      log(`ğŸ’¸ Ğ—Ğ°Ñ€Ğ¿Ğ»Ğ°Ñ‚Ğ° ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğµ: -${salary}`);
    }

    function earnSubscriptions() {
      const income = reputation * 20;
      budget += income;
      log(`ğŸ“ˆ ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸ Ğ¾Ñ‚ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ¾Ğ²: +${income}`);
    }

    function checkLevelUp() {
      if (reputation >= 60 && level === 1) {
        level = 2;
        log("ğŸ“Š Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ 2: Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ñ‹ Ğ½Ğ¾Ğ²Ñ‹Ğµ Ğ±Ğ¸Ğ·Ğ½ĞµÑÑ‹");
      }
      if (reputation >= 80 && level === 2) {
        level = 3;
        log("ğŸ† Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ 3: Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğº ĞšÑ€Ğ°ÑĞ½Ğ¾Ğµ & Ğ‘ĞµĞ»Ğ¾Ğµ");
      }
    }

    const businesses = [
      { name: "ğŸ›’ ĞŸĞ¾Ñ‚ĞµÑ€Ğ¾Ñ‡ĞºĞ°", need: ["pdf", "mobile"], team: 1, reward: 1500, rep: 5 },
      { name: "ğŸ§ƒ ĞœĞ°Ğ³Ğ½Ğ¸Ñ‚Ğ¸Ğº", need: ["pdf", "rls", "designer"], team: 2, reward: 3000, rep: 8 },
      { name: "ğŸ§» ĞÑˆĞ°Ğ½Ñ‡Ğ¸Ğº", need: ["pdf", "api", "analytics"], team: 3, reward: 4000, rep: 10 },
      { name: "ğŸ§´ ĞœĞµÑ‚Ñ€Ğ¾ÑˆĞ°", need: ["pdf", "rls", "mobile", "api", "analytics"], team: 4, reward: 6000, rep: 15 },
      { name: "ğŸ· ĞšÑ€Ğ°ÑĞ½Ğ¾Ğµ & Ğ‘ĞµĞ»Ğ¾Ğµ", need: ["pdf", "rls", "mobile", "api", "analytics"], team: 5, reward: 7000, rep: 20 }
    ];

    function renderBusinesses() {
      const container = document.getElementById("business-list");
      container.innerHTML = "";
      businesses.forEach(biz => {
        const div = document.createElement("div");
        div.className = "card";
        div.textContent = `${biz.name} â€” ${biz.reward}`;
        div.onclick = () => deploy(biz);
        container.appendChild(div);
      });
    }

    function deploy(biz) {
      const hasAll = biz.need.every(f => features.includes(f) || f === "designer" && team >= 2);
      if (hasAll && team >= biz.team) {
        budget += biz.reward;
        reputation += biz.rep;
        time++;
        log(`ğŸš€ Ğ’Ğ½ĞµĞ´Ñ€ĞµĞ½Ğ¸Ğµ Ğ² ${biz.name}: +${biz.reward}, +${biz.rep} Ñ€ĞµĞ¿ÑƒÑ‚Ğ°Ñ†Ğ¸Ğ¸`);
        updateStats();
        checkLevelUp();
        if (biz.name.includes("ĞšÑ€Ğ°ÑĞ½Ğ¾Ğµ") && reputation >= 100) {
          log("ğŸ‰ ĞŸĞ¾Ğ±ĞµĞ´Ğ°! RecountPro Ğ²Ğ½ĞµĞ´Ñ€Ñ‘Ğ½ Ğ² ĞšÑ€Ğ°ÑĞ½Ğ¾Ğµ & Ğ‘ĞµĞ»Ğ¾Ğµ!");
        }
      } else {
        log(`âŒ ĞĞµ Ñ…Ğ²Ğ°Ñ‚Ğ°ĞµÑ‚ Ñ„Ğ¸Ñ‡ Ğ¸Ğ»Ğ¸ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹ Ğ´Ğ»Ñ ${biz.name}`);
      }
    }

    function nextTurn() {
      time++;
      paySalaries();
      earnSubscriptions();
      if (time % 3 === 0) triggerClientRequest();
      updateStats();
    }

    function saveGame() {
      const state = {
        budget, time, team, reputation, level, features, featureLevels, office
      };
      localStorage.setItem("recountSave", JSON.stringify(state));
      log("ğŸ’¾ Ğ˜Ğ³Ñ€Ğ° ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ°");
    }

    function loadGame() {
      const state = JSON.parse(localStorage.getItem("recountSave"));
      if (state) {
        budget = state.budget;
        time = state.time;
        team = state.team;
        reputation = state.reputation;
        level = state.level;
        features = state.features;
        featureLevels = state.featureLevels;
        office = state.office;
        updateStats();
        log("ğŸ“‚ Ğ˜Ğ³Ñ€Ğ° Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶ĞµĞ½Ğ°");
      } else {
        log("âŒ ĞĞµÑ‚ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ñ");
      }
    }

    renderBusinesses();
    updateStats();
  </script>
</body>
</html>
